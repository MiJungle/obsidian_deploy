React.js : library
- something you use when you need to 
- you install, you are the one in control, architecture decision, where to put folders, files
- 

Framework
- you are not in charge
- lot of work done for you 
- make decision for you (start application, folder, file)
- you follow the rules of 


#### Why Next.js?


#### Router
- /pages router (previous version)
- /app router
- **layout, not-found, page** - file name important


React
- was empty, only after browser downloaded JavaScript file and executed them, that is when data shows up 
- so this means, when you refresh the page, it is blank -> downloads JavaScript file -> shows contents 
- problem - what if javascript is disabled?
- SEO : google will read your html and if it is blank, high possibility that it might not show up in the algorithm

Next.js
- automatically server-side rendering 
- Next.js will render html on server and give that when browser request
- "use client" *doesn't not* mean client side rendering, it is server side rendering 
- all components first rendered in backend 
- server rendered html -> load all the JavaScript -> init(html), this is where it becomes react components


Hydration(dehydrated fruit -> hydrated fruit)
- normal html -> top html initialize to become react components
- **not all components are going to be hydrated**
	- only components that are going to be hydrated -> are components that have "use client" at the top 
- so what it means by "use client"  -> rendered in server and hydrated in client(made interactive)
- by default it is going to be rendered in server 


Why need Layout system?
- reusable component like navigation
- copy paste navigation to every page?? 
- Next.js rendering Layout component `<Layout></Layout>`
- so like if you make home page , home page becomes children, next.js is rendering children 
	- `<Layout><Home></Home></Layout>`

Metadata
- server components
- show up in the head 
```js
export const metadata :MetaData = {
	title : {
		template: "%s | Next Movies",
		default: "Loading..."
	},
	description: "Generated by Next.js"
}
```


Dynamic Links
- folder name : `[id]`> page.tsx




Fetching Data 
- fetching happened in browser React <--> API <--> Data
	- drawbacks: always have to create API in the middle for security
		- what if next.js backend talks directly to database
		- always have to check are we loading or not
- fetching from server component means
	- we don't have to use useEffect, useState any more 
	- don't loading state 
- if you put loading page in directory, while fetching the data, next.js will show loading file
	- to do this, you have to export page with async
```js
"use client";
import { useEffect, useState } from "react";

export default function Page(){

const [movies, setMovies] = useState();
const getMovies = async() => {
const response = await fetch("https://nomad-movies.nomadcoders.workers.dev/movies");

const json = await response.json();
setMovies(json);
console.log("json", json)
}

useEffect(()=>{

getMovies();

},[])
```
```text
API: nomad-movies.nomadcoders.workers.dev/movies
nomad-movies.nomadcoders.workers.dev/movies/id
nomad-movies.nomadcoders.workers.dev/movies/videos


```


Fetching Data: How to Implement Parallel Requests?
- use Promise.all 
	- returns array of result
	- `const [movie, videos] = await Promise.all([getMovie(id), getVideos(id)])`
```
- below example, getVideo() will be triggered once movie is fetched 
	- we want getMovie() , getVideo() to start fetching together
```js
const movie = await getMovie();
const video = await getVideo();

const [movie, videos] = await Promise.all([getMovie(id)m getVideos(id)]);
return <h1>{movie.title}</h1>
```
- Promise.all problem: screen will show up only when both data are fetched
	- how to make screen show up when one of the data is fetched
	- solution: Suspense 
		- while fetching, it is going to show loading, once fetched, show component
```js
<Suspense fallback={<h1>Loading movie info</h1>}>
	<MovieInfo id={id}/>
</Suspense>
<Suspense fallback={<h1>Loading video info</h1>}>
	<VideoInfo id={id}/>
</Suspense>
```


How would you implement suspense?
```js
Suspense(){
	dataFetch() => on on reserve 
	dataFetch() => 
}
```


Next.js
- fetch : cached response
- dynamically showing metadata after fetching API
```js
//static
export const metadata = {
	title: "Home"
}

//dynamic
// parameter id is automatically given, just like given to page
export async function generateMetaData({ params: {id} }:IParams){
	const movie = await getMovie(id);
	return {
		title: movie.title
	}
}
```


Prefetch 
- moment we arrive homepage - next.js will start prefetching ex) when scrolling pages 